"use strict";(self["webpackChunkHouseHub"]=self["webpackChunkHouseHub"]||[]).push([[983],{1983:function(e,i,t){t.r(i),t.d(i,{default:function(){return G}});var a=t(6768);function s(e,i,t,s,l,o){const n=(0,a.g2)("SuperUser");return(0,a.uX)(),(0,a.Wv)(n)}var l=t(4232);const o={class:"card"},n={class:"m-0"};function d(e,i,t,s,d,r){const u=(0,a.g2)("Tab"),m=(0,a.g2)("TabList"),c=(0,a.g2)("Condominios"),p=(0,a.g2)("TabPanel"),h=(0,a.g2)("TabPanels"),b=(0,a.g2)("Tabs");return(0,a.uX)(),(0,a.CE)("div",o,[i[3]||(i[3]=(0,a.Lk)("div",{class:"card"},[(0,a.Lk)("h3",null,[(0,a.Lk)("i",{class:"pi pi-crown",style:{"font-size":"1rem"}}),(0,a.eW)(" Super User")])],-1)),(0,a.bF)(b,null,{default:(0,a.k6)(()=>[(0,a.bF)(m,null,{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.items,e=>((0,a.uX)(),(0,a.Wv)(u,{key:e.id,value:e.id},{default:(0,a.k6)(()=>[(0,a.Lk)("div",null,[(0,a.Lk)("i",{class:(0,l.C4)(e.icon),style:{"margin-right":"10px"}},null,2),(0,a.eW)(" "+(0,l.v_)(e.label),1)])]),_:2},1032,["value"]))),128))]),_:1}),(0,a.bF)(h,null,{default:(0,a.k6)(()=>[(0,a.bF)(p,{value:"0"},{default:(0,a.k6)(()=>[(0,a.Lk)("p",n,[(0,a.bF)(c)])]),_:1}),(0,a.bF)(p,{value:"1"},{default:(0,a.k6)(()=>i[0]||(i[0]=[(0,a.Lk)("p",{class:"m-0"},null,-1)])),_:1,__:[0]}),(0,a.bF)(p,{value:"2"},{default:(0,a.k6)(()=>i[1]||(i[1]=[(0,a.Lk)("p",{class:"m-0"},null,-1)])),_:1,__:[1]}),(0,a.bF)(p,{value:"3"},{default:(0,a.k6)(()=>i[2]||(i[2]=[(0,a.Lk)("p",{class:"m-0"},null,-1)])),_:1,__:[2]})]),_:1})]),_:1})])}var r=t(8188),u=t(5274),m=t(514),c=t(3441),p=t(8364);const h={class:"leftcontent"},b=["src","alt"],g={class:"p-4"},f={class:"form"},v={class:"flex flex-col gap-1"},y={class:"flex flex-col gap-1"},w={class:"flex flex-col gap-1"},F=["src"],k={class:"formButtons"};function C(e,i,t,s,o,n){const d=(0,a.g2)("Toast"),r=(0,a.g2)("ConfirmPopup"),u=(0,a.g2)("TableBar"),m=(0,a.g2)("Column"),c=(0,a.g2)("DataTable"),p=(0,a.g2)("InputText"),C=(0,a.g2)("Message"),A=(0,a.g2)("FileUpload"),I=(0,a.g2)("Button"),x=(0,a.g2)("Form"),R=(0,a.g2)("Dialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(d),(0,a.bF)(r),(0,a.Lk)("div",h,[(0,a.bF)(u,{onAddItem:n.addItem,onEditItem:n.editItem,onDeleteItem:n.deleteItem,onRefreshTable:n.refreshTable},null,8,["onAddItem","onEditItem","onDeleteItem","onRefreshTable"]),(0,a.bF)(c,{selection:o.selectedItems,"onUpdate:selection":i[0]||(i[0]=e=>o.selectedItems=e),value:o.items,sortField:"id",stripedRows:"",size:"small",paginator:"",rows:10,selectionMode:"multiple",metaKeySelection:o.metaKey,dataKey:"id",expandedRows:o.expandedRows,"onUpdate:expandedRows":i[1]||(i[1]=e=>o.expandedRows=e),onRowExpand:e.onRowExpand,onRowCollapse:e.onRowCollapse},{expansion:(0,a.k6)(e=>[(0,a.Lk)("div",g,[i[4]||(i[4]=(0,a.Lk)("h5",null,"Usuarios",-1)),(0,a.bF)(c,{value:e.data.users},{default:(0,a.k6)(()=>[(0,a.bF)(m,{field:"id",header:"Id",hidden:""}),(0,a.bF)(m,{field:"name",header:"Customer",sortable:""}),(0,a.bF)(m,{field:"email",header:"Date",sortable:""})]),_:2},1032,["value"])])]),default:(0,a.k6)(()=>[(0,a.bF)(m,{selectionMode:"multiple",headerStyle:"width: 3rem"}),(0,a.bF)(m,{expander:"",style:{width:"5rem"}}),(0,a.bF)(m,{field:"id",header:"Id",hidden:""}),(0,a.bF)(m,{field:"name",header:"Nombre",sortable:""}),(0,a.bF)(m,{field:"description",header:"Descripcion",sortable:""}),(0,a.bF)(m,{field:"image",header:"Imagen",sortable:""},{body:(0,a.k6)(e=>[(0,a.Lk)("img",{src:`data:image/jpeg;base64,${e.data.image}`,alt:e.data.image,class:"w-24 rounded",style:{width:"70px"}},null,8,b)]),_:1})]),_:1},8,["selection","value","metaKeySelection","expandedRows","onRowExpand","onRowCollapse"])]),(0,a.bF)(R,{visible:o.showAdd,"onUpdate:visible":i[3]||(i[3]=e=>o.showAdd=e),modal:"",header:o.titulo,style:{width:"25rem"}},{default:(0,a.k6)(()=>[(0,a.Lk)("div",f,[(0,a.bF)(x,{initialValues:o.initialValues,resolver:n.resolver,validateOnValueUpdate:!1,validateOnBlur:!1,onSubmit:n.onFormSubmit,class:"flex flex-col gap-4 w-full sm:w-56"},{default:(0,a.k6)(e=>[(0,a.Lk)("div",v,[(0,a.bF)(p,{name:"name",type:"text",placeholder:"Nombre",fluid:""}),e.name?.invalid?((0,a.uX)(),(0,a.Wv)(C,{key:0,severity:"error",size:"small",variant:"simple"},{default:(0,a.k6)(()=>[(0,a.eW)((0,l.v_)(e.name.error.message),1)]),_:2},1024)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",y,[(0,a.bF)(p,{name:"description",type:"text",placeholder:"Descripcion",fluid:""}),e.description?.invalid?((0,a.uX)(),(0,a.Wv)(C,{key:0,severity:"error",size:"small",variant:"simple"},{default:(0,a.k6)(()=>[(0,a.eW)((0,l.v_)(e.description.error.message),1)]),_:2},1024)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",w,[(0,a.bF)(A,{mode:"basic",onSelect:n.onFileSelect,customUpload:"",auto:"",severity:"secondary",class:"p-button-outlined",style:{"margin-bottom":"20px"}},null,8,["onSelect"]),o.src?((0,a.uX)(),(0,a.CE)("img",{key:0,src:o.src,alt:"Imagen",class:"shadow-md rounded-xl w-full sm:w-64",style:{width:"200px"}},null,8,F)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",k,[(0,a.bF)(I,{type:"button",label:"Cancelar",severity:"secondary",onClick:i[2]||(i[2]=e=>o.showAdd=!1),style:{"margin-top":"20px"}}),(0,a.bF)(I,{type:"submit",label:"Guardar",style:{"margin-left":"20px"}})])]),_:1},8,["initialValues","resolver","onSubmit"])])]),_:1},8,["visible","header"])],64)}t(8111),t(2489),t(1701);var A=t(7317),I=t(144),x=t(1677),R=t(3691),T=t(373),V=t(6697),_=t(6498),L=t(9018),S=t(542),K=t(6988),D=t(3076),U=t(3053),E=t(9532),P=t(569),W=t(3830),X=t(211),B={components:{DataTable:R.A,Column:T.A,TableBar:x.A,Dialog:V.A,InputText:_.A,Button:L.A,Form:P.A,Select:S.A,Message:K.A,ConfirmPopup:D.A,Toast:U.A,FileUpload:E.A},data(){return{titulo:(0,I.KR)(""),confirm:(0,X.S)(),toast:(0,W.d)(),selectedItems:(0,I.KR)([]),metaKey:(0,I.KR)(!0),items:(0,I.KR)([]),showAdd:(0,I.KR)(!1),newItem:(0,I.KR)(!1),initialValues:{id:0,name:"",description:"",image:null},file:(0,I.KR)(null),reader:(0,I.KR)(null),src:(0,I.KR)(null),expandedRows:{}}},methods:{async refreshTable(){try{const e=await A.A.getCondominios();this.items=e.data}catch(e){console.error("Failed to fetch Condominios:",e)}},async updateCondominio(){try{return(await A.A.updateCondominio(this.initialValues)).data}catch(e){console.error("Failed to update Condominios:",e)}},async createCondominio(){try{return(await A.A.createCondominio(this.initialValues)).data}catch(e){console.error("Failed to create Condominio:",e)}},async deleteCondominio(e){try{await A.A.deleteCondominio(e)}catch(i){console.error("Failed to delete Condominio:",i)}},addItem(){this.titulo="Agregar nuevo condominio",this.initialValues.id=null,this.initialValues.name="",this.initialValues.description="",this.initialValues.image=null,this.src=null,this.showAdd=!0,this.newItem=!0},editItem(){1!=this.selectedItems.length?this.toast.add({severity:"error",summary:"Select only one item to edit.",life:3e3}):(this.titulo="Actualizar condominio",this.initialValues=this.selectedItems[0],this.src="data:image/jpeg;base64,"+this.initialValues.image,this.showAdd=!0,this.newItem=!1)},deleteItem(e){0===this.selectedItems.length?this.toast.add({severity:"error",summary:"Select at least one item to delete.",life:3e3}):this.confirm.require({target:e.currentTarget,message:"Desea borrar el/los registros?",icon:"pi pi-info-circle",rejectProps:{label:"Cancelar",severity:"secondary",outlined:!0},acceptProps:{label:"Borrar",severity:"danger"},accept:()=>{this.toast.add({severity:"info",summary:"Registros borrados",life:3e3});for(const e of this.selectedItems)this.deleteCondominio(e.id),this.items=this.items.filter(i=>i.id!==e.id)},reject:()=>{}})},resolver({values:e}){const i={};return e.name||(i.name=[{message:"Name is required."}]),e.description||(i.description=[{message:"Description is required."}]),this.initialValues.name=e.name,this.initialValues.description=e.description,this.initialValues.image=e.image,{errors:i}},async onFormSubmit({valid:e}){e&&(this.toast.add({severity:"success",summary:"Condominio actualizado correctamente.",life:3e3}),this.showAdd=!1,this.selectedItems=[],this.newItem?(this.initialValues.image=this.src.split(",")[1],this.initialValues.src=this.image,this.initialValues=await this.createCondominio(),this.items=[...this.items,this.initialValues],this.refreshTable()):(this.initialValues.image=this.src.split(",")[1],this.initialValues.src=this.image,this.updateCondominio(),this.items=this.items.map(e=>e.id===this.initialValues.id?{...e,id:this.initialValues.id,name:this.initialValues.name,description:this.initialValues.description}:e)))},onFileSelect(e){const i=e.files[0],t=new FileReader;t.onload=async e=>{this.src=e.target.result},t.readAsDataURL(i)}},mounted(){this.refreshTable()}},z=t(1241);const j=(0,z.A)(B,[["render",C]]);var H=j,M={components:{Tabs:r.A,TabList:u.A,Tab:m.A,TabPanels:c.A,TabPanel:p.A,Condominios:H},data(){return{items:[{id:"0",label:"Condominios",icon:"pi pi-home"},{id:"1",label:"Tipo de Lotes",icon:"pi pi-tags"},{id:"2",label:"Cuotas",icon:"pi pi-dollar"},{id:"3",label:"Contactos",icon:"pi pi-address-book"}]}}};const q=(0,z.A)(M,[["render",d]]);var N=q,Q={components:{SuperUser:N}};const O=(0,z.A)(Q,[["render",s]]);var G=O}}]);
//# sourceMappingURL=983.dea1e8c1.js.map