{"version":3,"file":"js/365.e0efd226.js","mappings":"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","sources":["webpack://HouseHub/./src/views/login/Login.vue","webpack://HouseHub/./src/views/login/Login.vue?9557"],"sourcesContent":["<template>\r\n  <div class=\"main-content-login\">\r\n    <Toast />\r\n    <div class=\"login-container\">\r\n      <div class=\"login-image\">\r\n        <img src=\"@/assets/img8.jpg\" alt=\"HouseHub\">\r\n      </div>\r\n      <div class=\"login-form\">\r\n        <h1>House Hub</h1>\r\n        <h3>Iniciar Sesi√≥n</h3>\r\n        <Form v-slot=\"$form\" v-bind:initialValues=\"initialValues\" v-bind:resolver=\"resolver\"\r\n          :validateOnValueUpdate=\"false\" :validateOnBlur=\"false\" @submit=\"onFormSubmit\"\r\n          class=\"flex flex-col gap-4 w-full sm:w-56\">\r\n          <div class=\"flex flex-col gap-1\">\r\n            <InputText name=\"email\" type=\"email\" placeholder=\"email\" fluid />\r\n            <Message v-if=\"$form.email?.invalid\" severity=\"error\" size=\"small\" variant=\"simple\">{{\r\n              $form.email.error.message }}</Message>\r\n          </div>\r\n          <div class=\"flex flex-col gap-1\">\r\n            <InputText name=\"password\" type=\"password\" placeholder=\"Password\" fluid />\r\n            <Message v-if=\"$form.password?.invalid\" severity=\"error\" size=\"small\" variant=\"simple\">{{\r\n              $form.password.error.message }}</Message>\r\n          </div>\r\n\r\n          <Message v-if=\"loginErr\" severity=\"error\" size=\"small\" variant=\"simple\">{{\r\n            loginErr }}</Message>\r\n\r\n          <Button type=\"submit\" severity=\"secondary\" label=\"Submit\" style=\"margin-top: 20px;\" />\r\n\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Button, InputText, Message, Select, Toast } from 'primevue';\r\nimport { Form } from '@primevue/forms';\r\nimport { ref } from 'vue';\r\nimport { useAuthStore } from '@/service/auth';\r\nimport { useRouter } from 'vue-router';\r\nimport { useToast } from 'primevue/usetoast';\r\nimport apiService from '@/service/apiService';\r\n\r\n\r\nexport default {\r\n  components: {\r\n    Button, Form, InputText, Message, Select, Toast\r\n  },\r\n  data() {\r\n    return {\r\n      authStore: useAuthStore(),\r\n      router: useRouter(),\r\n      toast: useToast(),\r\n      token: ref(''),\r\n      loginErr: ref(''),\r\n      initialValues: ref({\r\n        email: 'jj@jj.com',\r\n        password: 'pass'\r\n      }),\r\n      userData: {\r\n        id: 0,\r\n        email: '',\r\n        name: '',\r\n        rol: null\r\n      },\r\n      condominiosList: [{\r\n        id: 0,\r\n        name: '',\r\n        description: '',\r\n        image: null\r\n      }]\r\n    }\r\n  },\r\n  methods: {\r\n    async handleLogin() {\r\n      this.userData = (await apiService.login(this.initialValues)).data;\r\n    },\r\n\r\n    resolver({ values }) {\r\n      const errors = {};\r\n      if (!values.email) {\r\n        errors.email = [{ message: 'Email is required.' }];\r\n      }\r\n      if (!values.password) {\r\n        errors.password = [{ message: 'Password is required.' }];\r\n      }\r\n      this.initialValues.email = values.email;\r\n      this.initialValues.password = values.password;\r\n      return {\r\n        errors\r\n      };\r\n    },\r\n    async onFormSubmit({ valid }) {\r\n      if (valid) {\r\n        await this.handleLogin();\r\n\r\n        if (this.userData.rol) {    //user ok       \r\n          this.authStore.login(this.userData); //userData trae el token\r\n          if (this.userData.rol === 1) {\r\n            this.$router.push({ name: 'homeuser' });\r\n          } else if (this.userData.rol === 2) {\r\n            this.authStore.setCondminiosList(this.condominiosList);\r\n            this.$router.push({ name: 'homeadmin' });\r\n          } else {\r\n            this.$router.push({ name: 'homesuperuser' });\r\n          }\r\n        } else {\r\n          this.toast.add({ severity: 'error', summary: 'Email / contrasena incorrectos.', life: 3000 });\r\n          this.loginErr = 'Email / contrasena incorrectos.';\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\ninput {\r\n  margin-bottom: 10px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.login-container {\r\n  display: flex;\r\n  overflow: hidden;\r\n  max-width: 900px;\r\n  align-content: center;\r\n  align-items: center;\r\n  align-self: center;\r\n  border-radius: 10px;\r\n  background-color: white;\r\n  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);\r\n  padding: 50px;\r\n}\r\n\r\n.login-image {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  overflow: hidden;\r\n  border-radius: 20px;\r\n}\r\n\r\n.login-image img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.login-form {\r\n  flex: 1;\r\n  /* Le da al formulario el mismo peso flexible que la imagen */\r\n  padding: 40px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n\r\n.main-content-login {\r\n  align-content: center;\r\n  align-items: center;\r\n  text-align: center;\r\n  align-self: center;\r\n  padding: 50px;\r\n  overflow-y: auto;\r\n  justify-content: space-between;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n</style>\r\n","import { render } from \"./Login.vue?vue&type=template&id=d7260910&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=d7260910&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d7260910\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_Toast","_createElementVNode","_hoisted_2","src","_imports_0","alt","_hoisted_3","_component_Form","initialValues","$data","resolver","$options","validateOnValueUpdate","validateOnBlur","onSubmit","onFormSubmit","$form","_hoisted_4","_component_InputText","name","type","placeholder","fluid","email","invalid","_createBlock","_component_Message","severity","size","variant","error","message","_hoisted_5","password","loginErr","_component_Button","label","style","components","Button","Form","InputText","Message","Select","Toast","data","authStore","useAuthStore","router","useRouter","toast","useToast","token","ref","userData","id","rol","condominiosList","description","image","methods","handleLogin","this","apiService","login","values","errors","valid","$router","push","setCondminiosList","add","summary","life","__exports__","render"],"sourceRoot":""}